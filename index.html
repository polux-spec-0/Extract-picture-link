<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Extracteur de photos</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    h1 { color: #333; }
    input { width: 70%; padding: 8px; }
    button { padding: 8px 12px; margin-left: 5px; }
    ul { margin-top: 20px; padding-left: 0; }
    li { margin-bottom: 5px; list-style-type: none; } /* ðŸ”¹ enlÃ¨ve les points devant */
  </style>
</head>
<body>
  <h1>Extracteur de photos dâ€™un article</h1>
  <p>Collez lâ€™URL dâ€™un article et obtenez tous les liens dâ€™images en haute rÃ©solution.</p>

  <input type="text" id="urlInput" placeholder="Collez lâ€™URL ici">
  <button onclick="extractImages()">Extraire</button>

  <ul id="result"></ul>

  <script>
    async function extractImages() {
      const url = document.getElementById("urlInput").value;
      const result = document.getElementById("result");
      result.innerHTML = "<li>Chargement...</li>";

      try {
        const response = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(url));
        const data = await response.json();
        const parser = new DOMParser();
        const doc = parser.parseFromString(data.contents, "text/html");

        // RÃ©cupÃ©rer le domaine de base (ex: https://en.minghui.org)
        const baseURL = new URL(url).origin;

        // SÃ©lectionne les <a> qui contiennent une <img>
        const links = [...doc.querySelectorAll("a[href]")].filter(a => a.querySelector("img"));

        result.innerHTML = "";
        if (links.length === 0) {
          result.innerHTML = "<li>Aucun lien trouvÃ©.</li>";
        } else {
          links.forEach(a => {
            let href = a.getAttribute("href"); // valeur brute

            // Si le lien est relatif (commence par "/"), on le complÃ¨te avec le domaine
            if (href.startsWith("/")) {
              href = baseURL + href;
            }

            // Filtres : ignorer certains liens indÃ©sirables
            if (href.startsWith("file:///C:/html/")) return;
            if (href.startsWith("https://polux-spec-0.github.io/")) return;
	        if (href.startsWith("https://en.minghui.org/cc/21/")) return;
	        if (href.startsWith("https://en.minghui.org/html/")) return;
	        if (href.startsWith("https://fr.minghui.org/cc/189/")) return;
	        if (href.startsWith("https://fr.minghui.org/html/")) return;
	        if (href.startsWith("https://fr.minghui.org/html/pages/subscribe/")) return;

            const li = document.createElement("li");
            const link = document.createElement("a");
            link.href = href;
            link.textContent = href;
            link.target = "_blank";
            li.appendChild(link);
            result.appendChild(li);
          });
        }
      } catch (err) {
        result.innerHTML = "<li>Erreur : " + err + "</li>";
      }
    }
  </script>
</body>
</html>



